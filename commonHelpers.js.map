{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function searchImages(query, currentPage) {\n  const API_KEY = '43146865-68c1cea507737b224ce08763a';\n  const BASE_URL = 'https://pixabay.com/api/';\n\n  const params = {\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: currentPage,\n    per_page: 15,\n  };\n\n  const res = await axios.get(BASE_URL, { params });\n  return res.data;\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst gallery = document.querySelector('.gallery');\n\nfunction imageTemplate(obj) {\n  const {\n    largeImageURL,\n    webformatURL,\n    tags,\n    likes,\n    views,\n    comments,\n    downloads,\n  } = obj;\n  return `<li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\" data-lightbox=\"gallery\">\n            <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"gallery-image\" />\n        </a>\n        <div class=\"image-details\">\n            <p>Likes: ${likes}</p>\n            <p>Views: ${views}</p>\n            <p>Comments: ${comments}</p>\n            <p>Downloads: ${downloads}</p>\n        </div>\n    </li>`;\n}\n\nfunction imagesTemplate(arr) {\n  return arr.map(imageTemplate).join('');\n}\n\nexport function renderImages(arr) {\n  const markup = imagesTemplate(arr);\n  gallery.insertAdjacentHTML('beforeend', markup);\n\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  });\n\n  lightbox.refresh();\n}\n","import { searchImages } from './js/pixabay-api.js';\nimport { renderImages } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\n// =========================================\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loadBtn = document.querySelector('.load-btn');\n\nlet query = '';\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n// =========================================\n\nsearchForm.addEventListener('submit', handleSubmit);\nloadBtn.addEventListener('click', handleClick);\n\nasync function handleSubmit(e) {\n  e.preventDefault();\n\n  query = searchForm.elements.search.value.trim();\n  gallery.innerHTML = '';\n  currentPage = 1;\n\n  if (!query) {\n    iziToast.error({\n      message: 'Please enter a search query',\n    });\n    return;\n  }\n\n  try {\n    showLoader();\n    const data = await searchImages(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / pageSize);\n    renderImages(data.hits);\n  } catch (err) {\n    console.log(err);\n  }\n\n  hideLoader();\n  checkBtn();\n  e.target.reset();\n}\n\nasync function handleClick() {\n  currentPage += 1;\n  showLoader();\n\n  try {\n    const data = await searchImages(query, currentPage);\n    renderImages(data.hits);\n  } catch (error) {\n    console.log(error);\n  }\n\n  myScroll();\n  checkBtn();\n  hideLoader();\n}\n\nfunction showLoadMore() {\n  loadBtn.classList.remove('hidden');\n}\n\nfunction hideLoadMore() {\n  loadBtn.classList.add('hidden');\n}\n\nfunction showLoader() {\n  loader.classList.remove('hidden');\n}\n\nfunction hideLoader() {\n  loader.classList.add('hidden');\n}\n\nfunction checkBtn() {\n  if (currentPage >= maxPage) {\n    hideLoadMore();\n    iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n    });\n  } else {\n    showLoadMore();\n  }\n}\n\nfunction myScroll() {\n  const height = gallery.firstChild.getBoundingClientRect().height;\n  scrollBy({\n    top: height * 1.5,\n    behavior: 'smooth',\n  });\n}\n"],"names":["searchImages","query","currentPage","API_KEY","BASE_URL","params","axios","gallery","imageTemplate","obj","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imagesTemplate","arr","renderImages","markup","SimpleLightbox","searchForm","loader","loadBtn","maxPage","pageSize","handleSubmit","handleClick","e","iziToast","showLoader","data","err","hideLoader","checkBtn","error","myScroll","showLoadMore","hideLoadMore","height"],"mappings":"+vBAEO,eAAeA,EAAaC,EAAOC,EAAa,CACrD,MAAMC,EAAU,qCACVC,EAAW,2BAEXC,EAAS,CACb,IAAKF,EACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EACd,EAGE,OADY,MAAMI,EAAM,IAAIF,EAAU,CAAE,OAAAC,CAAM,CAAE,GACrC,IACb,CCZA,MAAME,EAAU,SAAS,cAAc,UAAU,EAEjD,SAASC,EAAcC,EAAK,CAC1B,KAAM,CACJ,cAAAC,EACA,aAAAC,EACA,KAAAC,EACA,MAAAC,EACA,MAAAC,EACA,SAAAC,EACA,UAAAC,CACD,EAAGP,EACJ,MAAO;AAAA,mBACUC,CAAa;AAAA,wBACRC,CAAY,UAAUC,CAAI;AAAA;AAAA;AAAA,wBAG1BC,CAAK;AAAA,wBACLC,CAAK;AAAA,2BACFC,CAAQ;AAAA,4BACPC,CAAS;AAAA;AAAA,UAGrC,CAEA,SAASC,EAAeC,EAAK,CAC3B,OAAOA,EAAI,IAAIV,CAAa,EAAE,KAAK,EAAE,CACvC,CAEO,SAASW,EAAaD,EAAK,CAChC,MAAME,EAASH,EAAeC,CAAG,EACjCX,EAAQ,mBAAmB,YAAaa,CAAM,EAE7B,IAAIC,EAAe,aAAc,CAChD,aAAc,MACd,aAAc,GAClB,CAAG,EAEQ,QAAO,CAClB,CCrCA,MAAMC,EAAa,SAAS,cAAc,cAAc,EAClDf,EAAU,SAAS,cAAc,UAAU,EAC3CgB,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIvB,EAAQ,GACRC,EAAc,EACduB,EAAU,EACd,MAAMC,EAAW,GAGjBJ,EAAW,iBAAiB,SAAUK,CAAY,EAClDH,EAAQ,iBAAiB,QAASI,CAAW,EAE7C,eAAeD,EAAaE,EAAG,CAO7B,GANAA,EAAE,eAAc,EAEhB5B,EAAQqB,EAAW,SAAS,OAAO,MAAM,KAAI,EAC7Cf,EAAQ,UAAY,GACpBL,EAAc,EAEV,CAACD,EAAO,CACV6B,EAAS,MAAM,CACb,QAAS,6BACf,CAAK,EACD,MACD,CAED,GAAI,CACFC,IACA,MAAMC,EAAO,MAAMhC,EAAaC,EAAOC,CAAW,EAClDuB,EAAU,KAAK,KAAKO,EAAK,UAAYN,CAAQ,EAC7CP,EAAaa,EAAK,IAAI,CACvB,OAAQC,EAAK,CACZ,QAAQ,IAAIA,CAAG,CAChB,CAEDC,IACAC,IACAN,EAAE,OAAO,OACX,CAEA,eAAeD,GAAc,CAC3B1B,GAAe,EACf6B,IAEA,GAAI,CACF,MAAMC,EAAO,MAAMhC,EAAaC,EAAOC,CAAW,EAClDiB,EAAaa,EAAK,IAAI,CACvB,OAAQI,EAAO,CACd,QAAQ,IAAIA,CAAK,CAClB,CAEDC,IACAF,IACAD,GACF,CAEA,SAASI,GAAe,CACtBd,EAAQ,UAAU,OAAO,QAAQ,CACnC,CAEA,SAASe,GAAe,CACtBf,EAAQ,UAAU,IAAI,QAAQ,CAChC,CAEA,SAASO,GAAa,CACpBR,EAAO,UAAU,OAAO,QAAQ,CAClC,CAEA,SAASW,GAAa,CACpBX,EAAO,UAAU,IAAI,QAAQ,CAC/B,CAEA,SAASY,GAAW,CACdjC,GAAeuB,GACjBc,IACAT,EAAS,KAAK,CACZ,QAAS,4DACf,CAAK,GAEDQ,GAEJ,CAEA,SAASD,GAAW,CAClB,MAAMG,EAASjC,EAAQ,WAAW,sBAAqB,EAAG,OAC1D,SAAS,CACP,IAAKiC,EAAS,IACd,SAAU,QACd,CAAG,CACH"}